(this.webpackJsonpcart=this.webpackJsonpcart||[]).push([[0],{22:function(t,e,c){},43:function(t,e,c){"use strict";c.r(e);var a=c(2),r=c.n(a),n=c(14),s=c.n(n),o=(c(22),c(5)),j=c.n(o),i=c(15),u=c(17),l=c(16),b=c.n(l),d=c(1),O=function(t,e){switch(e.type){case"FETCH_ITEMS":return Object(d.a)(Object(d.a)({},t),{},{cart:e.payload});case"CLEAR_CART":return Object(d.a)(Object(d.a)({},t),{},{cart:[]});case"REMOVE_ITEM":var c=t.cart.filter((function(t){return t.id!==e.payload}));return Object(d.a)(Object(d.a)({},t),{},{cart:c});case"INCREASE":var a=t.cart.map((function(t){return t.id===e.payload?Object(d.a)(Object(d.a)({},t),{},{amount:t.amount+1}):t}));return Object(d.a)(Object(d.a)({},t),{},{cart:a});case"DECREASE":var r=t.cart.map((function(t){return t.id===e.payload?Object(d.a)(Object(d.a)({},t),{},{amount:t.amount-1}):t})).filter((function(t){return 0!==t.amount}));return console.log(r),Object(d.a)(Object(d.a)({},t),{},{cart:r});case"GET_TOTALS":var n=t.cart.reduce((function(t,e){var c=e.price,a=e.amount,r=c*a;return t.total+=r,t.amount+=a,t}),{total:0,amount:0}),s=n.total,o=n.amount;return s=parseFloat(s.toFixed(2)),Object(d.a)(Object(d.a)({},t),{},{total:s,amount:o});default:throw new Error("No action type found")}},h=c(0),m=Object(a.createContext)(),x={cart:[],total:0,amount:0},p=function(t){var e=t.children,c=Object(a.useReducer)(O,x),r=Object(u.a)(c,2),n=r[0],s=r[1],o=function(){var t=Object(i.a)(j.a.mark((function t(){var e,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://course-api.com/react-useReducer-cart-project",t.prev=1,t.next=4,b.a.get("https://course-api.com/react-useReducer-cart-project");case 4:if(!((e=t.sent).status>=400)){t.next=7;break}throw new Error(e.statusText);case 7:c=e.data,s({type:"FETCH_ITEMS",payload:c}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),alert(t.t0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){o()}),[]),Object(a.useEffect)((function(){s({type:"GET_TOTALS"})}),[n.cart]),Object(h.jsx)(m.Provider,{value:{state:n,clearCart:function(){s({type:"CLEAR_CART"})},removeItem:function(t){s({type:"REMOVE_ITEM",payload:t})},increase:function(t){s({type:"INCREASE",payload:t})},decrease:function(t){s({type:"DECREASE",payload:t})}},children:e})},v=function(){var t=Object(a.useContext)(m).state;return Object(h.jsx)("nav",{children:Object(h.jsxs)("div",{className:"nav-center",children:[Object(h.jsx)("h3",{children:"useReducer"}),Object(h.jsxs)("div",{className:"nav-container",children:[Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:Object(h.jsx)("path",{d:"M16 6v2h2l2 12H0L2 8h2V6a6 6 0 1 1 12 0zm-2 0a4 4 0 1 0-8 0v2h8V6zM4 10v2h2v-2H4zm10 0v2h2v-2h-2z"})}),Object(h.jsx)("div",{className:"amount-container",children:Object(h.jsx)("p",{className:"total-amount",children:t.amount})})]})]})})},f=function(t){var e=t.id,c=t.img,r=t.price,n=t.title,s=t.amount,o=Object(a.useContext)(m),j=o.removeItem,i=o.increase,u=o.decrease;return Object(h.jsx)(h.Fragment,{children:s>0&&Object(h.jsxs)("article",{className:"cart-item",children:[Object(h.jsx)("img",{src:c,alt:n}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h4",{children:n}),Object(h.jsx)("h4",{className:"item-price",children:"$".concat(r)}),Object(h.jsx)("button",{onClick:function(){return j(e)},className:"remove-btn",children:"remove"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:function(){return i(e)},className:"amount-btn",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:Object(h.jsx)("path",{d:"M10.707 7.05L10 6.343 4.343 12l1.414 1.414L10 9.172l4.243 4.242L15.657 12z"})})}),Object(h.jsx)("p",{className:"amount",children:s}),Object(h.jsx)("button",{onClick:function(){return u(e)},className:"amount-btn",children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:Object(h.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]})})},E=function(){var t=Object(a.useContext)(m),e=t.state,c=t.clearCart;return Object(h.jsxs)("section",{className:"cart",children:[Object(h.jsxs)("header",{children:[Object(h.jsx)("h2",{children:"your bag"}),0===e.amount&&Object(h.jsx)("h4",{className:"empty-cart",children:"is currently empty"})]}),Object(h.jsx)("div",{children:e.cart&&e.cart.map((function(t){return Object(h.jsx)(f,Object(d.a)({},t),t.id)}))}),e.amount>0&&Object(h.jsxs)("footer",{children:[Object(h.jsx)("hr",{}),Object(h.jsx)("div",{className:"cart-total",children:Object(h.jsxs)("h4",{children:["total ",Object(h.jsxs)("span",{children:["$","".concat(e.total)]})]})}),Object(h.jsx)("button",{onClick:c,className:"btn clear-btn",children:"clear cart"})]})]})};var w=function(){return Object(h.jsx)("main",{children:Object(h.jsxs)(p,{children:[Object(h.jsx)(v,{}),Object(h.jsx)(E,{})]})})};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(w,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.11b1e068.chunk.js.map